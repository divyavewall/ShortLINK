{%extends 'base.html' %}
{%block title%}DashBoard-ShortLINK{%endblock title%}
{%block content%}
<section style="
        background-color:gainsboro;
        padding-top:5rem;
        padding-bottom:5rem;
    ">
    <div class="container card shadow col-md-7">
        <form class="row mt-3" method="POST">
            {%csrf_token%}
            <div class="col-md-7">
                <input type="text" class="form-control" id="staticUrl" name="URL" placeholder="Paste URL">
            </div>
            <div class="col-3">
                <input type="text" class="form-control" placeholder="Alias" name="alias">
            </div>
            <div class="col-2">
                <button type="submit" class="btn short-url-btn mb-3">Short URL</button>
            </div>
        </form>
    </div>
    <div class="container card shadow col-md-7 mt-4">
        <table class="table table-hover">
            <thead>
                <tr>
                    <!-- <th style="color:#2B7A78;" scope="col">S.No</th> -->
                    <th style="color:#2B7A78;" scope="col">URL</th>
                    <th style="color:#2B7A78;" scope="col">Short URL</th>
                    <th style="color:#2B7A78;" scope="col">Datetime</th>
                </tr>
            </thead>
            <tbody>
                {%for url in request.user.url_set.all%}
                <tr>
                    <!-- <th scope="row">{{forloop.counter}}</th> -->
                    <td> <input type="text" value="{{url.targetUrl}}" title="{{url.targetUrl}}" class="form-control" readonly> </td>
                    <td class="d-flex align-items-center">
                        <span>
                            <input type="text" value="{{domain}}/{{url.alias}}" title="{{domain}}/{{url.alias}}" id="shorted-{{url.id}}" class="form-control" readonly />
                        </span>
                        <button class="btn p-1" onclick="copyText('{{url.id}}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" class="bi bi-stickies ml-2" viewBox="0 0 16 16">
                                <path d="M1.5 0A1.5 1.5 0 0 0 0 1.5V13a1 1 0 0 0 1 1V1.5a.5.5 0 0 1 .5-.5H14a1 1 0 0 0-1-1H1.5z" />
                                <path d="M3.5 2A1.5 1.5 0 0 0 2 3.5v11A1.5 1.5 0 0 0 3.5 16h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 16 9.586V3.5A1.5 1.5 0 0 0 14.5 2h-11zM3 3.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5V9h-4.5A1.5 1.5 0 0 0 9 10.5V15H3.5a.5.5 0 0 1-.5-.5v-11zm7 11.293V10.5a.5.5 0 0 1 .5-.5h4.293L10 14.793z" />
                            </svg>
                        </button>
                    </td>
                    <td>{{url.timestamp}}</td>
                </tr>
                {%endfor%}
            </tbody>
        </table>
    </div>
</section>
<script>
    function copyText(id){
        var inputTag = document.getElementById(`shorted-${id}`)
        inputTag.select();
        document.execCommand("copy")
    }
</script>
<style>
    .short-url-btn{
        background-color: #2B7A78;
        color :aliceblue;
        border:1px solid aliceblue;
    }
    .short-url-btn:hover{
        background-color: aliceblue;
        color :#2B7A78;
        border:1px solid #2B7A78;
    }
</style>
{%endblock content%}